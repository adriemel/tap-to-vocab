w,de,lang,sent,mode
gato,Katze,es-ES,El gato duerme.,prompt-de
perro,Hund,es-ES,El perro corre.,listen-spell-es
rojo,rot,es-ES,,prompt-es
escuela,Schule,es-ES,,listen-spell-es
biblioteca,Bibliothek,es-ES,Voy a la biblioteca.,prompt-de

<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Linkâ€‘Generator (DE â†” ES)</title>
  <style>
    body { font: 17px/1.5 system-ui, sans-serif; max-width: 760px; margin: 2rem auto; padding: 0 1rem; }
    label { display:block; margin:.4rem 0 .2rem; }
    input, select { width: 100%; padding: .6rem; box-sizing: border-box; }
    .row { display: grid; grid-template-columns: 1fr 1fr; gap: .8rem; }
    button { margin-top: .8rem; padding: .6rem 1rem; cursor: pointer; }
    code { background: #f5f5f5; padding: .2rem .4rem; border-radius: 4px; display:block; word-break: break-all; }
    .small { color:#555; font-size: 0.9rem; }
  </style>
</head>
<body>
  <h1>Tapâ€‘toâ€‘Vocab Linkâ€‘Generator (Deutsch â†” EspaÃ±ol)</h1>
  <p class="small">1) Nutze GitHub Pages fÃ¼r die VerÃ¶ffentlichung. 2) Trage unten deine Ã¶ffentliche <strong>Basisâ€‘URL</strong> ein (endet mit <code>/vocab.html</code>). 3) Felder ausfÃ¼llen â†’ â€žGenerierenâ€œ.</p>

  <label>Basisâ€‘URL zu <code>vocab.html</code> (z.â€¯B. <em>https://username.github.io/tap-to-vocab/vocab.html</em>)</label>
  <input id="base" placeholder="https://username.github.io/tap-to-vocab/vocab.html" />

  <div class="row">
    <div>
      <label>Spanisches Wort (<em>w</em>)</label>
      <input id="w" placeholder="gato" />
    </div>
    <div>
      <label>Deutsches Wort/Ãœbersetzung (<em>de</em>)</label>
      <input id="de" placeholder="Katze" />
    </div>
  </div>

  <label>Beispielsatz (<em>sent</em>) â€“ optional</label>
  <input id="sent" placeholder="El gato duerme." />

  <div class="row">
    <div>
      <label>Spanische Stimme (<em>lang</em>)</label>
      <select id="lang">
        <option value="es-ES">es-ES (Spanien)</option>
        <option value="es-MX">es-MX (Mexiko)</option>
        <option value="es-AR">es-AR (Argentinien)</option>
      </select>
    </div>
    <div>
      <label>Modus</label>
      <select id="mode">
        <option value="prompt-de">Deutsch als Hinweis â†’ Spanisch lÃ¶sen</option>
        <option value="prompt-es">Spanisch als Hinweis â†’ Deutsch lÃ¶sen</option>
        <option value="listen-spell-es">AnhÃ¶ren (ES) â†’ spanisch schreiben</option>
        <option value="listen-spell-de">AnhÃ¶ren (DE) â†’ deutsch schreiben</option>
      </select>
    </div>
  </div>

  <button id="gen">NFCâ€‘URL generieren</button>
  <code id="url"></code>
  <button id="copy">URL kopieren</button>

<script>
const $ = (id) => document.getElementById(id);
$("gen").addEventListener("click", () => {
  const base = $("base").value.trim();
  const w = $("w").value.trim();
  const de = $("de").value.trim();
  const sent = $("sent").value.trim();
  const lang = $("lang").value;
  const mode = $("mode").value;
  if (!base || (!w && !de)) { $("url").textContent = "Bitte Basisâ€‘URL und mindestens ein Wort angeben."; return; }
  const params = new URLSearchParams({ lang, mode });
  if (w) params.set("w", w);
  if (de) params.set("de", de);
  if (sent) params.set("sent", sent);
  $("url").textContent = base + "?" + params.toString();
});
$("copy").addEventListener("click", async () => {
  const t = $("url").textContent;
  if (!t) return;
  try { await navigator.clipboard.writeText(t); alert("Kopiert!"); } catch (e) { alert("Kopieren fehlgeschlagen. Bitte manuell markieren."); }
});
</script>
</body>
</html>

<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tapâ€‘toâ€‘Vocab (DE â†” ES)</title>
  <style>
    body { font: 17px/1.5 system-ui, sans-serif; max-width: 760px; margin: 2rem auto; padding: 0 1rem; }
    a { text-decoration: none; }
  </style>
</head>
<body>
  <h1>Tapâ€‘toâ€‘Vocab Starter (Deutsch â†” EspaÃ±ol)</h1>
  <ol>
    <li>Ã–ffne <a href="./builder.html">builder.html</a>, um NFCâ€‘Links zu erzeugen.</li>
    <li>Schreibe die erzeugten URLs auf NFCâ€‘Sticker (Datensatzâ€‘Typ: URL).</li>
    <li>Jede URL Ã¶ffnet <code>vocab.html</code> und Ã¼bernimmt Wort/Modus aus den Parametern.</li>
  </ol>
  <p>Demoâ€‘Links:</p>
  <ul>
    <li><a href="./vocab.html?w=gato&de=Katze&lang=es-ES&mode=prompt-de">Deutsch â†’ Spanisch (Katze â†’ gato)</a></li>
    <li><a href="./vocab.html?w=rojo&de=rot&lang=es-ES&mode=prompt-es">Spanisch â†’ Deutsch (rojo â†’ rot)</a></li>
    <li><a href="./vocab.html?w=escuela&de=Schule&lang=es-ES&mode=listen-spell-es">AnhÃ¶ren (ES) â†’ escuela schreiben</a></li>
    <li><a href="./vocab.html?de=Schule&mode=listen-spell-de">AnhÃ¶ren (DE) â†’ Schule schreiben</a></li>
  </ul>
</body>
</html>

# Tapâ€‘toâ€‘Vocab (Deutsch â†” EspaÃ±ol)

`vocab.html` zeigt ein Wort, spricht es (Spanisch oder Deutsch) und prÃ¼ft die Schreibweise. Inhalte kommen Ã¼ber URLâ€‘Parameter.

## Dateien
- `index.html` â€” Startseite mit Demos
- `vocab.html` â€” Lernseite (Audio + Schreibweise)
- `builder.html` â€” Generator fÃ¼r NFCâ€‘Links

## Schnellstart
1. Dateien in ein GitHubâ€‘Repository laden.
2. GitHub Pages aktivieren (Settings â†’ Pages â†’ Deploy from a branch â†’ `main` / root).
3. Ã–ffentliche URL: `https://USERNAME.github.io/REPO/`
4. Lernseite: `https://USERNAME.github.io/REPO/vocab.html`

## URLâ€‘Parameter
- `w`  â€” spanisches Wort (optional, wenn Deutschâ€‘Prompt genutzt wird)
- `de` â€” deutsches Wort/Ãœbersetzung (optional, wenn Spanischâ€‘Prompt genutzt wird)
- `lang` â€” spanische Stimme fÃ¼r TTS (Standard `es-ES`)
- `sent` â€” Beispielsatz (optional)
- `mode` â€” `prompt-de`, `prompt-es`, `listen-spell-es`, `listen-spell-de`

**Ziel der SchreibÃ¼bung**
- `prompt-de` / `listen-spell-es`: LÃ¶sung ist **Spanisch** (`w`).
- `prompt-es` / `listen-spell-de`: LÃ¶sung ist **Deutsch** (`de`).

## NFC
Schreibe die vollstÃ¤ndige URL auf einen NFCâ€‘Tag (Record: URL). Drucke einen QRâ€‘Code der gleichen URL als Fallback.

<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tapâ€‘toâ€‘Vocab (DE â†” ES)</title>
  <style>
    body { font: 18px/1.4 system-ui, sans-serif; max-width: 720px; margin: 2rem auto; padding: 0 1rem; }
    h1 { font-size: 1.6rem; margin: 0 0 0.5rem; }
    .card { border: 1px solid #ddd; border-radius: 12px; padding: 1rem; }
    .big { font-size: 2rem; letter-spacing: 1px; margin: 0.8rem 0; }
    input { font-size: 1.2rem; padding: 0.6rem; width: 100%; box-sizing: border-box; }
    button { font-size: 1rem; padding: 0.6rem 1rem; margin-right: .5rem; cursor: pointer; }
    .hint { color:#555; }
  </style>
</head>
<body>
  <div class="card">
    <h1 id="title">Tapâ€‘toâ€‘Vocab (Deutsch â†” EspaÃ±ol)</h1>
    <div id="prompt" class="big"></div>
    <div id="translation" class="hint"></div>
    <p>
      <button id="speak">ðŸ”Š AnhÃ¶ren</button>
      <button id="reveal">ðŸ‘€ Anzeigen/Verbergen</button>
    </p>
    <p><strong>Schreibweise Ã¼ben:</strong></p>
    <form id="spell-form">
      <input id="spell" autocomplete="off" placeholder="Schreibe das Wortâ€¦" />
      <p id="feedback"></p>
      <button type="submit">PrÃ¼fen</button>
      <button type="button" id="showLetter">Tipp: nÃ¤chsten Buchstaben</button>
    </form>
    <p id="sentence"></p>
  </div>

<script>
(function () {
  const qs = new URLSearchParams(location.search);
  // Parameters:
  // w  = Spanish word (optional if using German prompt)
  // de = German word/translation (optional if using Spanish prompt)
  // lang = speech locale for audio (default es-ES)
  // sent = example sentence (any language)
  // mode = prompt-de | prompt-es | listen-spell-es | listen-spell-de
  const w = (qs.get("w") || "").trim();
  const de = (qs.get("de") || "").trim();
  const lang = qs.get("lang") || "es-ES";
  const sent = (qs.get("sent") || "").trim();
  const mode = qs.get("mode") || "prompt-de";

  const promptEl = document.getElementById("prompt");
  const translationEl = document.getElementById("translation");
  const sentenceEl = document.getElementById("sentence");
  const speakBtn = document.getElementById("speak");
  const revealBtn = document.getElementById("reveal");
  const form = document.getElementById("spell-form");
  const input = document.getElementById("spell");
  const feedback = document.getElementById("feedback");
  const showLetter = document.getElementById("showLetter");

  // For listen-spell-de mode, we want German TTS
  function voiceForMode() {
    if (mode === "listen-spell-de" || mode === "prompt-es-to-de") return "de-DE";
    return lang; // Spanish variants
  }

  let hidden = true;
  function render() {
    // What to show as prompt vs hidden translation
    if (mode === "prompt-de" || mode === "listen-spell-es") {
      promptEl.textContent = de || "Hinweis (Deutsch)";
      translationEl.textContent = hidden ? "â€¦" : (w || "");
    } else if (mode === "prompt-es" || mode === "listen-spell-de") {
      promptEl.textContent = w || "Palabra (EspaÃ±ol)";
      translationEl.textContent = hidden ? "â€¦" : (de || "");
    } else {
      promptEl.textContent = de || "Hinweis (Deutsch)";
      translationEl.textContent = hidden ? "â€¦" : (w || "");
    }
    sentenceEl.textContent = sent ? ("ðŸ§© " + sent) : "";
  }
  render();

  // Speech synthesis helper
  function speak(text, locale) {
    if (!("speechSynthesis" in window)) return;
    const u = new SpeechSynthesisUtterance(text);
    u.lang = locale || "es-ES";
    window.speechSynthesis.cancel();
    window.speechSynthesis.speak(u);
  }

  // Speak button: speak the *target* language word
  speakBtn.addEventListener("click", () => {
    if (mode === "prompt-de" || mode === "listen-spell-es") {
      // target Spanish
      if (w) speak(w, lang);
    } else {
      // target German
      if (de) speak(de, "de-DE");
    }
  });

  revealBtn.addEventListener("click", () => { hidden = !hidden; render(); });

  // Spelling check (diacritics tolerant)
  function normalize(s){ return (s||"").toLowerCase().normalize("NFD").replace(/[Ì€-Í¯]/g,""); }
  form.addEventListener("submit", (e) => {
    e.preventDefault();
    // In prompt-de or listen-spell-es the answer should be Spanish; else German
    const target = (mode === "prompt-de" || mode === "listen-spell-es") ? w : de;
    const ok = normalize(input.value) === normalize(target);
    feedback.textContent = ok ? "âœ… Richtig!" : "âŒ Noch nicht. Nochmal versuchen.";
    if (ok) {
      // speak target
      if (mode === "prompt-de" || mode === "listen-spell-es") speak(w, lang);
      else speak(de, "de-DE");
      try { localStorage.setItem("lastOk_"+(target||""), Date.now()); } catch(e){}
    }
  });

  // Reveal next correct letter
  showLetter.addEventListener("click", () => {
    const target = (mode === "prompt-de" || mode === "listen-spell-es") ? w : de;
    const typed = input.value;
    let i = 0;
    while (i < typed.length && normalize(typed[i]) === normalize((target||"")[i])) i++;
    input.value = typed.slice(0, i) + ((target||"")[i] || "") + typed.slice(i);
    input.focus();
  });

  // Auto-speak on load for listen-spell modes
  if (mode === "listen-spell-es" && w) speak(w, lang);
  if (mode === "listen-spell-de" && de) speak(de, "de-DE");
})();
</script>
</body>
</html>
