<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Tap-to-Vocab Link-Generator</title>
<style>
  body { font: 17px/1.5 system-ui, sans-serif; max-width: 760px; margin: 2rem auto; padding: 0 1rem; }
  label { display:block; margin:.4rem 0 .2rem; }
  input, select { width:100%; padding:.6rem; box-sizing:border-box; }
  .row { display:grid; grid-template-columns:1fr 1fr; gap:.8rem; }
  button { margin-top:.8rem; padding:.6rem 1rem; cursor:pointer; }
  code { background:#f5f5f5; padding:.2rem .4rem; border-radius:4px; display:block; word-break:break-all; }
  .small { color:#555; font-size:.9rem; }
</style>
</head>
<body>
<h1>Tap-to-Vocab Link-Generator</h1>
<p class="small">1) Trage unten deine Basis-URL ein (endet NICHT mit Slash). Beispiel: <code>https://USERNAME.github.io/REPO</code><br>2) Wähle die Richtung. 3) Felder ausfüllen → „URL generieren“.</p>

<label>Basis-URL</label>
<input id="base" placeholder="https://USERNAME.github.io/REPO" />

<label>Richtung</label>
<select id="direction">
  <option value="de-es">Deutsch → Spanisch</option>
  <option value="es-de">Spanisch → Deutsch</option>
</select>

<div class="row">
  <div>
    <label>Spanisches Wort (<em>w</em>)</label>
    <input id="w" placeholder="gato" />
  </div>
  <div>
    <label>Deutsches Wort (<em>de</em>)</label>
    <input id="de" placeholder="Katze" />
  </div>
</div>

<label>Beispielsatz (<em>sent</em>) – optional</label>
<input id="sent" placeholder="El gato duerme." />

<div class="row">
  <div>
    <label>Spanische Stimme (TTS-Locale)</label>
    <select id="lang">
      <option value="es-ES">es-ES (Spanien)</option>
      <option value="es-MX">es-MX (Mexiko)</option>
      <option value="es-AR">es-AR (Argentinien)</option>
    </select>
  </div>
  <div>
    <label>Stimme erzwingen (optional, exakter Name)</label>
    <input id="voice" placeholder="Paulina oder Mónica" />
  </div>
</div>

<button id="gen">URL generieren</button>
<code id="url"></code>
<button id="copy">URL kopieren</button>

<script>
const $ = id => document.getElementById(id);
$("gen").addEventListener("click", () => {
  const base = $("base").value.trim().replace(/\/+$/,''); // no trailing slash
  const dir = $("direction").value;
  const w = $("w").value.trim();
  const de = $("de").value.trim();
  const sent = $("sent").value.trim();
  const lang = $("lang").value;
  const voice = $("voice").value.trim();

  if (!base) { $("url").textContent = "Bitte Basis-URL eintragen."; return; }
  if (!w && !de) { $("url").textContent = "Bitte mindestens ein Wort angeben."; return; }

  const page = dir === "de-es" ? "vocab-de-es.html" : "vocab-es-de.html";
  const params = new URLSearchParams();
  if (w) params.set("w", w);
  if (de) params.set("de", de);
  if (sent) params.set("sent", sent);
  if (dir === "de-es") params.set("lang", lang); // only relevant when target is ES
  if (voice) params.set("voice", voice);

  $("url").textContent = base + "/" + page + "?" + params.toString();
});

$("copy").addEventListener("click", async () => {
  const t = $("url").textContent;
  if (!t) return;
  try { await navigator.clipboard.writeText(t); alert("Kopiert!"); }
  catch { alert("Kopieren fehlgeschlagen. Bitte manuell markieren."); }
});
</script>
</body>
</html>
